<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Submodules" href="genai.html" />

    <!-- Generated with Sphinx 8.2.3 and Furo 2024.08.06 -->
        <title>Google Gen AI SDK documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="_static/autodoc_pydantic.css?v=a0a71c94" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=fdc8595f" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --font-stack: "Google Sans Text", Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif;
  --font-stack--monospace: Roboto Mono, "Helvetica Neue Mono", monospace;
  --font-stack--headings: "Google Sans Text", Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif;
  --color-brand-primary: black;
  --color-brand-content: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --font-stack: "Google Sans Text", Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif;
  --font-stack--monospace: Roboto Mono, "Helvetica Neue Mono", monospace;
  --font-stack--headings: "Google Sans Text", Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif;
  --color-brand-primary: white;
  --color-brand-content: white;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --font-stack: "Google Sans Text", Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif;
  --font-stack--monospace: Roboto Mono, "Helvetica Neue Mono", monospace;
  --font-stack--headings: "Google Sans Text", Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif;
  --color-brand-primary: white;
  --color-brand-content: white;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="#"><div class="brand">Google Gen AI SDK  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="#">
  
  
  <span class="sidebar-brand-text">Google Gen AI SDK  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="genai.html">Submodules</a></li>
<li class="toctree-l1"><a class="reference internal" href="genai.html#genai-client-module">genai.client module</a></li>
<li class="toctree-l1"><a class="reference internal" href="genai.html#genai-batches-module">genai.batches module</a></li>
<li class="toctree-l1"><a class="reference internal" href="genai.html#genai-caches-module">genai.caches module</a></li>
<li class="toctree-l1"><a class="reference internal" href="genai.html#genai-chats-module">genai.chats module</a></li>
<li class="toctree-l1"><a class="reference internal" href="genai.html#genai-files-module">genai.files module</a></li>
<li class="toctree-l1"><a class="reference internal" href="genai.html#genai-live-module">genai.live module</a></li>
<li class="toctree-l1"><a class="reference internal" href="genai.html#genai-models-module">genai.models module</a></li>
<li class="toctree-l1"><a class="reference internal" href="genai.html#genai-tokens-module">genai.tokens module</a></li>
<li class="toctree-l1"><a class="reference internal" href="genai.html#genai-tunings-module">genai.tunings module</a></li>
<li class="toctree-l1"><a class="reference internal" href="genai.html#genai-types-module">genai.types module</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/index.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="google-gen-ai-sdk">
<h1>Google Gen AI SDK<a class="headerlink" href="#google-gen-ai-sdk" title="Link to this heading">¶</a></h1>
<p><a class="reference external" href="https://pypi.org/project/google-genai/"><img alt="pypi" src="https://img.shields.io/pypi/v/google-genai.svg" /></a></p>
<p><a class="reference external" href="https://github.com/googleapis/python-genai">https://github.com/googleapis/python-genai</a></p>
<p><strong>google-genai</strong> is an initial Python client library for interacting with
Google’s Generative AI APIs.</p>
<p>Google Gen AI Python SDK provides an interface for developers to integrate Google’s generative models into their Python applications. It supports the <a class="reference external" href="https://ai.google.dev/gemini-api/docs">Gemini Developer API</a> and <a class="reference external" href="https://cloud.google.com/vertex-ai/generative-ai/docs/learn/overview">Vertex AI</a> APIs.</p>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading">¶</a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>google-genai
</pre></div>
</div>
</section>
<section id="imports">
<h2>Imports<a class="headerlink" href="#imports" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google</span><span class="w"> </span><span class="kn">import</span> <span class="n">genai</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>
</pre></div>
</div>
</section>
<section id="create-a-client">
<h2>Create a client<a class="headerlink" href="#create-a-client" title="Link to this heading">¶</a></h2>
<p>Please run one of the following code blocks to create a client for
different services (<a class="reference external" href="https://ai.google.dev/gemini-api/docs">Gemini Developer API</a> or <a class="reference external" href="https://cloud.google.com/vertex-ai/generative-ai/docs/learn/overview">Vertex AI</a>). Feel free to switch the client and
run all the examples to see how it behaves under different APIs.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google</span><span class="w"> </span><span class="kn">import</span> <span class="n">genai</span>

<span class="c1"># Only run this block for Gemini Developer API</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">genai</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;GEMINI_API_KEY&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google</span><span class="w"> </span><span class="kn">import</span> <span class="n">genai</span>

<span class="c1"># Only run this block for Vertex AI API</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">genai</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span>
    <span class="n">vertexai</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="s1">&#39;your-project-id&#39;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;us-central1&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>(Optional) Using environment variables:</strong></p>
<p>You can create a client by configuring the necessary environment variables.
Configuration setup instructions depends on whether you’re using the Gemini
Developer API or the Gemini API in Vertex AI.</p>
<p><strong>Gemini Developer API:</strong> Set <cite>GOOGLE_API_KEY</cite> as shown below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">GOOGLE_API_KEY</span><span class="o">=</span><span class="s1">&#39;your-api-key&#39;</span>
</pre></div>
</div>
<p><strong>Gemini API in Vertex AI:</strong> Set <cite>GOOGLE_GENAI_USE_VERTEXAI</cite>, <cite>GOOGLE_CLOUD_PROJECT</cite>
and <cite>GOOGLE_CLOUD_LOCATION</cite>, as shown below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">GOOGLE_GENAI_USE_VERTEXAI</span><span class="o">=</span><span class="nb">true</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">GOOGLE_CLOUD_PROJECT</span><span class="o">=</span><span class="s1">&#39;your-project-id&#39;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">GOOGLE_CLOUD_LOCATION</span><span class="o">=</span><span class="s1">&#39;us-central1&#39;</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google</span><span class="w"> </span><span class="kn">import</span> <span class="n">genai</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">genai</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>
</pre></div>
</div>
<section id="api-selection">
<h3>API Selection<a class="headerlink" href="#api-selection" title="Link to this heading">¶</a></h3>
<p>By default, the SDK uses the beta API endpoints provided by Google to support preview features in the APIs. The stable API endpoints can be selected by setting the API version to <cite>v1</cite>.</p>
<p>To set the API version use <code class="docutils literal notranslate"><span class="pre">http_options</span></code>. For example, to set the API version to <code class="docutils literal notranslate"><span class="pre">v1</span></code> for Vertex AI:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google</span><span class="w"> </span><span class="kn">import</span> <span class="n">genai</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">genai</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span>
    <span class="n">vertexai</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">project</span><span class="o">=</span><span class="s1">&#39;your-project-id&#39;</span><span class="p">,</span>
    <span class="n">location</span><span class="o">=</span><span class="s1">&#39;us-central1&#39;</span><span class="p">,</span>
    <span class="n">http_options</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">HttpOptions</span><span class="p">(</span><span class="n">api_version</span><span class="o">=</span><span class="s1">&#39;v1&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>To set the API version to <cite>v1alpha</cite> for the Gemini Developer API:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google</span><span class="w"> </span><span class="kn">import</span> <span class="n">genai</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="c1"># Only run this block for Gemini Developer API</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">genai</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span>
    <span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;GEMINI_API_KEY&#39;</span><span class="p">,</span>
    <span class="n">http_options</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">HttpOptions</span><span class="p">(</span><span class="n">api_version</span><span class="o">=</span><span class="s1">&#39;v1alpha&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="faster-async-client-option-aiohttp">
<h3>Faster async client option: Aiohttp<a class="headerlink" href="#faster-async-client-option-aiohttp" title="Link to this heading">¶</a></h3>
<p>By default we use httpx for both sync and async client implementations. In order
to have faster performance, you may install <cite>google-genai[aiohttp]</cite>. In Gen AI
SDK we configure <cite>trust_env=True</cite> to match with the default behavior of httpx.
Additional args of <cite>aiohttp.ClientSession.request()</cite>
(<a class="reference external" href="https://github.com/aio-libs/aiohttp/blob/v3.12.13/aiohttp/client.py#L170">see _RequestOptions args</a>)
can be passed through the following way:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">http_options</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">HttpOptions</span><span class="p">(</span>
    <span class="n">async_client_args</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;cookies&#39;</span><span class="p">:</span> <span class="o">...</span><span class="p">,</span> <span class="s1">&#39;ssl&#39;</span><span class="p">:</span> <span class="o">...</span><span class="p">},</span>
<span class="p">)</span>

<span class="n">client</span><span class="o">=</span><span class="n">Client</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">http_options</span><span class="o">=</span><span class="n">http_options</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="proxy">
<h3>Proxy<a class="headerlink" href="#proxy" title="Link to this heading">¶</a></h3>
<p>Both httpx and aiohttp libraries use <cite>urllib.request.getproxies</cite> from
environment variables. Before client initialization, you may set proxy (and
optional SSL_CERT_FILE) by setting the environment variables:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">HTTPS_PROXY</span><span class="o">=</span><span class="s1">&#39;http://username:password@proxy_uri:port&#39;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">SSL_CERT_FILE</span><span class="o">=</span><span class="s1">&#39;client.pem&#39;</span>
</pre></div>
</div>
<p>If you need <cite>socks5</cite> proxy, httpx <a class="reference external" href="https://www.python-httpx.org/advanced/proxies/#socks">supports</a>
<cite>socks5</cite> proxy if you pass it via args to httpx.Client(). You may install
<cite>httpx[socks]</cite> to use it. Then you can pass it through the following way:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">http_options</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">HttpOptions</span><span class="p">(</span>
    <span class="n">client_args</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;proxy&#39;</span><span class="p">:</span> <span class="s1">&#39;socks5://user:pass@host:port&#39;</span><span class="p">},</span>
    <span class="n">async_client_args</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;proxy&#39;</span><span class="p">:</span> <span class="s1">&#39;socks5://user:pass@host:port&#39;</span><span class="p">},</span>
<span class="p">)</span>

<span class="n">client</span><span class="o">=</span><span class="n">Client</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">http_options</span><span class="o">=</span><span class="n">http_options</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="types">
<h2>Types<a class="headerlink" href="#types" title="Link to this heading">¶</a></h2>
<p>Parameter types can be specified as either dictionaries(<code class="docutils literal notranslate"><span class="pre">TypedDict</span></code>) or <a class="reference external" href="https://pydantic.readthedocs.io/en/stable/model.html">Pydantic Models</a>.
Pydantic model types are available in the <code class="docutils literal notranslate"><span class="pre">types</span></code> module.</p>
</section>
</section>
<section id="models">
<h1>Models<a class="headerlink" href="#models" title="Link to this heading">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">client.models</span></code> modules exposes model inferencing and model
getters. See the ‘Create a client’ section above to initialize a client.</p>
<section id="generate-content">
<h2>Generate Content<a class="headerlink" href="#generate-content" title="Link to this heading">¶</a></h2>
<section id="with-text-content">
<h3>with text content<a class="headerlink" href="#with-text-content" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">,</span> <span class="n">contents</span><span class="o">=</span><span class="s1">&#39;Why is the sky blue?&#39;</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="with-uploaded-file-gemini-developer-api-only">
<h3>with uploaded file (Gemini Developer API only)<a class="headerlink" href="#with-uploaded-file-gemini-developer-api-only" title="Link to this heading">¶</a></h3>
<p>download the file in console.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">!wget -q https://storage.googleapis.com/generativeai-downloads/data/a11.txt</span>
</pre></div>
</div>
<p>python code.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">file</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="s1">&#39;a11.txt&#39;</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">,</span>
    <span class="n">contents</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Could you summarize this file?&#39;</span><span class="p">,</span> <span class="n">file</span><span class="p">]</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="how-to-structure-contents-argument-for-generate-content">
<h3>How to structure <cite>contents</cite> argument for <cite>generate_content</cite><a class="headerlink" href="#how-to-structure-contents-argument-for-generate-content" title="Link to this heading">¶</a></h3>
<p>The SDK always converts the inputs to the <cite>contents</cite> argument into
<cite>list[types.Content]</cite>.
The following shows some common ways to provide your inputs.</p>
<section id="provide-a-list-types-content">
<h4>Provide a <cite>list[types.Content]</cite><a class="headerlink" href="#provide-a-list-types-content" title="Link to this heading">¶</a></h4>
<p>This is the canonical way to provide contents, SDK will not do any conversion.</p>
</section>
<section id="provide-a-types-content-instance">
<h4>Provide a <cite>types.Content</cite> instance<a class="headerlink" href="#provide-a-types-content-instance" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="n">contents</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Content</span><span class="p">(</span>
<span class="n">role</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span>
<span class="n">parts</span><span class="o">=</span><span class="p">[</span><span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="o">.</span><span class="n">from_text</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Why is the sky blue?&#39;</span><span class="p">)]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>SDK converts this to</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="n">types</span><span class="o">.</span><span class="n">Content</span><span class="p">(</span>
    <span class="n">role</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span>
    <span class="n">parts</span><span class="o">=</span><span class="p">[</span><span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="o">.</span><span class="n">from_text</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Why is the sky blue?&#39;</span><span class="p">)]</span>
<span class="p">)</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
<section id="provide-a-string">
<h4>Provide a string<a class="headerlink" href="#provide-a-string" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">contents</span><span class="o">=</span><span class="s1">&#39;Why is the sky blue?&#39;</span>
</pre></div>
</div>
<p>The SDK will assume this is a text part, and it converts this into the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="n">types</span><span class="o">.</span><span class="n">UserContent</span><span class="p">(</span>
    <span class="n">parts</span><span class="o">=</span><span class="p">[</span>
    <span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="o">.</span><span class="n">from_text</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Why is the sky blue?&#39;</span><span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Where a <cite>types.UserContent</cite> is a subclass of <cite>types.Content</cite>, it sets the
<cite>role</cite> field to be <cite>user</cite>.</p>
</section>
<section id="provide-a-list-of-string">
<h4>Provide a list of string<a class="headerlink" href="#provide-a-list-of-string" title="Link to this heading">¶</a></h4>
<p>The SDK assumes these are 2 text parts, it converts this into a single content,
like the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="n">types</span><span class="o">.</span><span class="n">UserContent</span><span class="p">(</span>
    <span class="n">parts</span><span class="o">=</span><span class="p">[</span>
    <span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="o">.</span><span class="n">from_text</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Why is the sky blue?&#39;</span><span class="p">),</span>
    <span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="o">.</span><span class="n">from_text</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Why is the cloud white?&#39;</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Where a <cite>types.UserContent</cite> is a subclass of <cite>types.Content</cite>, the
<cite>role</cite> field in <cite>types.UserContent</cite> is fixed to be <cite>user</cite>.</p>
</section>
<section id="provide-a-function-call-part">
<h4>Provide a function call part<a class="headerlink" href="#provide-a-function-call-part" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="n">contents</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="o">.</span><span class="n">from_function_call</span><span class="p">(</span>
<span class="n">name</span><span class="o">=</span><span class="s1">&#39;get_weather_by_location&#39;</span><span class="p">,</span>
<span class="n">args</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;location&#39;</span><span class="p">:</span> <span class="s1">&#39;Boston&#39;</span><span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The SDK converts a function call part to a content with a <cite>model</cite> role:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="n">types</span><span class="o">.</span><span class="n">ModelContent</span><span class="p">(</span>
    <span class="n">parts</span><span class="o">=</span><span class="p">[</span>
    <span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="o">.</span><span class="n">from_function_call</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;get_weather_by_location&#39;</span><span class="p">,</span>
        <span class="n">args</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;location&#39;</span><span class="p">:</span> <span class="s1">&#39;Boston&#39;</span><span class="p">}</span>
    <span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Where a <cite>types.ModelContent</cite> is a subclass of <cite>types.Content</cite>, the
<cite>role</cite> field in <cite>types.ModelContent</cite> is fixed to be <cite>model</cite>.</p>
</section>
<section id="provide-a-list-of-function-call-parts">
<h4>Provide a list of function call parts<a class="headerlink" href="#provide-a-list-of-function-call-parts" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="n">contents</span> <span class="o">=</span> <span class="p">[</span>
<span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="o">.</span><span class="n">from_function_call</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;get_weather_by_location&#39;</span><span class="p">,</span>
    <span class="n">args</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;location&#39;</span><span class="p">:</span> <span class="s1">&#39;Boston&#39;</span><span class="p">}</span>
<span class="p">),</span>
<span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="o">.</span><span class="n">from_function_call</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;get_weather_by_location&#39;</span><span class="p">,</span>
    <span class="n">args</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;location&#39;</span><span class="p">:</span> <span class="s1">&#39;New York&#39;</span><span class="p">}</span>
<span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The SDK converts a list of function call parts to the a content with a <cite>model</cite> role:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="n">types</span><span class="o">.</span><span class="n">ModelContent</span><span class="p">(</span>
    <span class="n">parts</span><span class="o">=</span><span class="p">[</span>
    <span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="o">.</span><span class="n">from_function_call</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;get_weather_by_location&#39;</span><span class="p">,</span>
        <span class="n">args</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;location&#39;</span><span class="p">:</span> <span class="s1">&#39;Boston&#39;</span><span class="p">}</span>
    <span class="p">),</span>
    <span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="o">.</span><span class="n">from_function_call</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;get_weather_by_location&#39;</span><span class="p">,</span>
        <span class="n">args</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;location&#39;</span><span class="p">:</span> <span class="s1">&#39;New York&#39;</span><span class="p">}</span>
    <span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Where a <cite>types.ModelContent</cite> is a subclass of <cite>types.Content</cite>, the
<cite>role</cite> field in <cite>types.ModelContent</cite> is fixed to be <cite>model</cite>.</p>
</section>
<section id="provide-a-non-function-call-part">
<h4>Provide a non function call part<a class="headerlink" href="#provide-a-non-function-call-part" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="n">contents</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="o">.</span><span class="n">from_uri</span><span class="p">(</span>
<span class="n">file_uri</span><span class="p">:</span> <span class="s1">&#39;gs://generativeai-downloads/images/scones.jpg&#39;</span><span class="p">,</span>
<span class="n">mime_type</span><span class="p">:</span> <span class="s1">&#39;image/jpeg&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The SDK converts all non function call parts into a content with a <cite>user</cite> role.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="n">types</span><span class="o">.</span><span class="n">UserContent</span><span class="p">(</span><span class="n">parts</span><span class="o">=</span><span class="p">[</span>
    <span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="o">.</span><span class="n">from_uri</span><span class="p">(</span>
    <span class="n">file_uri</span><span class="p">:</span> <span class="s1">&#39;gs://generativeai-downloads/images/scones.jpg&#39;</span><span class="p">,</span>
    <span class="n">mime_type</span><span class="p">:</span> <span class="s1">&#39;image/jpeg&#39;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">])</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
<section id="provide-a-list-of-non-function-call-parts">
<h4>Provide a list of non function call parts<a class="headerlink" href="#provide-a-list-of-non-function-call-parts" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="n">contents</span> <span class="o">=</span> <span class="p">[</span>
<span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="o">.</span><span class="n">from_text</span><span class="p">(</span><span class="s1">&#39;What is this image about?&#39;</span><span class="p">),</span>
<span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="o">.</span><span class="n">from_uri</span><span class="p">(</span>
    <span class="n">file_uri</span><span class="p">:</span> <span class="s1">&#39;gs://generativeai-downloads/images/scones.jpg&#39;</span><span class="p">,</span>
    <span class="n">mime_type</span><span class="p">:</span> <span class="s1">&#39;image/jpeg&#39;</span><span class="p">,</span>
<span class="p">)</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The SDK will convert the list of parts into a content with a <cite>user</cite> role</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="n">types</span><span class="o">.</span><span class="n">UserContent</span><span class="p">(</span>
    <span class="n">parts</span><span class="o">=</span><span class="p">[</span>
    <span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="o">.</span><span class="n">from_text</span><span class="p">(</span><span class="s1">&#39;What is this image about?&#39;</span><span class="p">),</span>
    <span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="o">.</span><span class="n">from_uri</span><span class="p">(</span>
        <span class="n">file_uri</span><span class="p">:</span> <span class="s1">&#39;gs://generativeai-downloads/images/scones.jpg&#39;</span><span class="p">,</span>
        <span class="n">mime_type</span><span class="p">:</span> <span class="s1">&#39;image/jpeg&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
<section id="mix-types-in-contents">
<h4>Mix types in contents<a class="headerlink" href="#mix-types-in-contents" title="Link to this heading">¶</a></h4>
<p>You can also provide a list of <cite>types.ContentUnion</cite>. The SDK leaves items of
<cite>types.Content</cite> as is, it groups consecutive non function call parts into a
single <cite>types.UserContent</cite>, and it groups consecutive function call parts into
a single <cite>types.ModelContent</cite>.</p>
<p>If you put a list within a list, the inner list can only contain
<cite>types.PartUnion</cite> items. The SDK will convert the inner list into a single
<cite>types.UserContent</cite>.</p>
</section>
</section>
</section>
<section id="system-instructions-and-other-configs">
<h2>System Instructions and Other Configs<a class="headerlink" href="#system-instructions-and-other-configs" title="Link to this heading">¶</a></h2>
<p>The output of the model can be influenced by several optional settings
available in generate_content’s config parameter. For example, increasing
<cite>max_output_tokens</cite> is essential for longer model responses. To make a model more
deterministic, lowering the <cite>temperature</cite> parameter reduces randomness, with
values near 0 minimizing variability. Capabilities and parameter defaults for
each model is shown in the
<a class="reference external" href="https://cloud.google.com/vertex-ai/generative-ai/docs/models/gemini/2-5-flash">Vertex AI docs</a>
and <a class="reference external" href="https://ai.google.dev/gemini-api/docs/models">Gemini API docs</a> respectively.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">,</span>
    <span class="n">contents</span><span class="o">=</span><span class="s1">&#39;high&#39;</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">GenerateContentConfig</span><span class="p">(</span>
        <span class="n">system_instruction</span><span class="o">=</span><span class="s1">&#39;I say high, you say low&#39;</span><span class="p">,</span>
        <span class="n">max_output_tokens</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
        <span class="n">temperature</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="typed-config">
<h2>Typed Config<a class="headerlink" href="#typed-config" title="Link to this heading">¶</a></h2>
<p>All API methods support Pydantic types for parameters as well as
dictionaries. You can get the type from <code class="docutils literal notranslate"><span class="pre">google.genai.types</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">,</span>
    <span class="n">contents</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="o">.</span><span class="n">from_text</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Why is the sky blue?&#39;</span><span class="p">),</span>
    <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">GenerateContentConfig</span><span class="p">(</span>
        <span class="n">temperature</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">top_p</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span>
        <span class="n">top_k</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
        <span class="n">candidate_count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">seed</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">max_output_tokens</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">stop_sequences</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;STOP!&#39;</span><span class="p">],</span>
        <span class="n">presence_penalty</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="n">frequency_penalty</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="list-base-models">
<h2>List Base Models<a class="headerlink" href="#list-base-models" title="Link to this heading">¶</a></h2>
<p>To retrieve tuned models, see: <span class="xref std std-ref">List Tuned Models</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">list</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pager</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;page_size&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pager</span><span class="o">.</span><span class="n">page_size</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pager</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">pager</span><span class="o">.</span><span class="n">next_page</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pager</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
<section id="list-base-models-asynchronous">
<h3>List Base Models (Asynchronous)<a class="headerlink" href="#list-base-models-asynchronous" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">for</span> <span class="n">job</span> <span class="ow">in</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">aio</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">list</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">job</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">async_pager</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">aio</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;page_size&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">async_pager</span><span class="o">.</span><span class="n">page_size</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">async_pager</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="k">await</span> <span class="n">async_pager</span><span class="o">.</span><span class="n">next_page</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">async_pager</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</section>
</section>
<section id="safety-settings">
<h2>Safety Settings<a class="headerlink" href="#safety-settings" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">,</span>
    <span class="n">contents</span><span class="o">=</span><span class="s1">&#39;Say something bad.&#39;</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">GenerateContentConfig</span><span class="p">(</span>
        <span class="n">safety_settings</span><span class="o">=</span><span class="p">[</span>
            <span class="n">types</span><span class="o">.</span><span class="n">SafetySetting</span><span class="p">(</span>
                <span class="n">category</span><span class="o">=</span><span class="s1">&#39;HARM_CATEGORY_HATE_SPEECH&#39;</span><span class="p">,</span>
                <span class="n">threshold</span><span class="o">=</span><span class="s1">&#39;BLOCK_ONLY_HIGH&#39;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">]</span>
    <span class="p">),</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="function-calling">
<h2>Function Calling<a class="headerlink" href="#function-calling" title="Link to this heading">¶</a></h2>
<p>Automatic Python function Support:</p>
<p>You can pass a Python function directly and it will be automatically
called and responded.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_current_weather</span><span class="p">(</span><span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the current weather.</span>

<span class="sd">    Args:</span>
<span class="sd">      location: The city and state, e.g. San Francisco, CA</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s1">&#39;sunny&#39;</span>


<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">,</span>
    <span class="n">contents</span><span class="o">=</span><span class="s1">&#39;What is the weather like in Boston?&#39;</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">GenerateContentConfig</span><span class="p">(</span>
        <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">get_current_weather</span><span class="p">],</span>
    <span class="p">),</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
<section id="disabling-automatic-function-calling">
<h3>Disabling automatic function calling<a class="headerlink" href="#disabling-automatic-function-calling" title="Link to this heading">¶</a></h3>
<p>If you pass in a python function as a tool directly, and do not want
automatic function calling, you can disable automatic function calling
as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">,</span>
    <span class="n">contents</span><span class="o">=</span><span class="s1">&#39;What is the weather like in Boston?&#39;</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">GenerateContentConfig</span><span class="p">(</span>
        <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">get_current_weather</span><span class="p">],</span>
        <span class="n">automatic_function_calling</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">AutomaticFunctionCallingConfig</span><span class="p">(</span>
            <span class="n">disable</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">),</span>
    <span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>With automatic function calling disabled, you will get a list of function call
parts in the response:</p>
</section>
<section id="manually-declare-and-invoke-a-function-for-function-calling">
<h3>Manually declare and invoke a function for function calling<a class="headerlink" href="#manually-declare-and-invoke-a-function-for-function-calling" title="Link to this heading">¶</a></h3>
<p>If you don’t want to use the automatic function support, you can manually
declare the function and invoke it.</p>
<p>The following example shows how to declare a function and pass it as a tool.
Then you will receive a function call part in the response.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="n">function</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">FunctionDeclaration</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;get_current_weather&#39;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Get the current weather in a given location&#39;</span><span class="p">,</span>
    <span class="n">parameters</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">Schema</span><span class="p">(</span>
        <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;OBJECT&#39;</span><span class="p">,</span>
        <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;location&#39;</span><span class="p">:</span> <span class="n">types</span><span class="o">.</span><span class="n">Schema</span><span class="p">(</span>
                <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;STRING&#39;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s1">&#39;The city and state, e.g. San Francisco, CA&#39;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">},</span>
        <span class="n">required</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">],</span>
    <span class="p">),</span>
<span class="p">)</span>

<span class="n">tool</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Tool</span><span class="p">(</span><span class="n">function_declarations</span><span class="o">=</span><span class="p">[</span><span class="n">function</span><span class="p">])</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">,</span>
    <span class="n">contents</span><span class="o">=</span><span class="s1">&#39;What is the weather like in Boston?&#39;</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">GenerateContentConfig</span><span class="p">(</span>
        <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">tool</span><span class="p">],</span>
    <span class="p">),</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">function_calls</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
<p>After you receive the function call part from the model, you can invoke the function
and get the function response. And then you can pass the function response to
the model.
The following example shows how to do it for a simple function invocation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="n">user_prompt_content</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Content</span><span class="p">(</span>
    <span class="n">role</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span>
    <span class="n">parts</span><span class="o">=</span><span class="p">[</span><span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="o">.</span><span class="n">from_text</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;What is the weather like in Boston?&#39;</span><span class="p">)],</span>
<span class="p">)</span>
<span class="n">function_call_part</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">function_calls</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">function_call_content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">candidates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">content</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">function_result</span> <span class="o">=</span> <span class="n">get_current_weather</span><span class="p">(</span>
        <span class="o">**</span><span class="n">function_call_part</span><span class="o">.</span><span class="n">function_call</span><span class="o">.</span><span class="n">args</span>
    <span class="p">)</span>
    <span class="n">function_response</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">function_result</span><span class="p">}</span>
<span class="k">except</span> <span class="p">(</span>
    <span class="ne">Exception</span>
<span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># instead of raising the exception, you can let the model handle it</span>
    <span class="n">function_response</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;error&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)}</span>


<span class="n">function_response_part</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="o">.</span><span class="n">from_function_response</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="n">function_call_part</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
    <span class="n">response</span><span class="o">=</span><span class="n">function_response</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">function_response_content</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Content</span><span class="p">(</span>
    <span class="n">role</span><span class="o">=</span><span class="s1">&#39;tool&#39;</span><span class="p">,</span> <span class="n">parts</span><span class="o">=</span><span class="p">[</span><span class="n">function_response_part</span><span class="p">]</span>
<span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">,</span>
    <span class="n">contents</span><span class="o">=</span><span class="p">[</span>
        <span class="n">user_prompt_content</span><span class="p">,</span>
        <span class="n">function_call_content</span><span class="p">,</span>
        <span class="n">function_response_content</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">GenerateContentConfig</span><span class="p">(</span>
        <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">tool</span><span class="p">],</span>
    <span class="p">),</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="function-calling-with-any-tools-config-mode">
<h3>Function calling with <code class="docutils literal notranslate"><span class="pre">ANY</span></code> tools config mode<a class="headerlink" href="#function-calling-with-any-tools-config-mode" title="Link to this heading">¶</a></h3>
<p>If you configure function calling mode to be <cite>ANY</cite>, then the model will always
return function call parts. If you also pass a python function as a tool, by
default the SDK will perform automatic function calling until the remote calls
exceed the maximum remote call for automatic function calling (default to 10 times).</p>
<p>If you’d like to disable automatic function calling in <cite>ANY</cite> mode:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_current_weather</span><span class="p">(</span><span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the current weather.</span>

<span class="sd">    Args:</span>
<span class="sd">        location: The city and state, e.g. San Francisco, CA</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;sunny&quot;</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash-001&quot;</span><span class="p">,</span>
    <span class="n">contents</span><span class="o">=</span><span class="s2">&quot;What is the weather like in Boston?&quot;</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">GenerateContentConfig</span><span class="p">(</span>
        <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">get_current_weather</span><span class="p">],</span>
        <span class="n">automatic_function_calling</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">AutomaticFunctionCallingConfig</span><span class="p">(</span>
            <span class="n">disable</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">),</span>
        <span class="n">tool_config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">ToolConfig</span><span class="p">(</span>
            <span class="n">function_calling_config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">FunctionCallingConfig</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;ANY&#39;</span><span class="p">)</span>
        <span class="p">),</span>
    <span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>If you’d like to set <code class="docutils literal notranslate"><span class="pre">x</span></code> number of automatic function call turns, you can
configure the maximum remote calls to be <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">1</span></code>.
Assuming you prefer <code class="docutils literal notranslate"><span class="pre">1</span></code> turn for automatic function calling:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_current_weather</span><span class="p">(</span><span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the current weather.</span>

<span class="sd">    Args:</span>
<span class="sd">        location: The city and state, e.g. San Francisco, CA</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;sunny&quot;</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash-001&quot;</span><span class="p">,</span>
    <span class="n">contents</span><span class="o">=</span><span class="s2">&quot;What is the weather like in Boston?&quot;</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">GenerateContentConfig</span><span class="p">(</span>
        <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">get_current_weather</span><span class="p">],</span>
        <span class="n">automatic_function_calling</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">AutomaticFunctionCallingConfig</span><span class="p">(</span>
            <span class="n">maximum_remote_calls</span><span class="o">=</span><span class="mi">2</span>
        <span class="p">),</span>
        <span class="n">tool_config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">ToolConfig</span><span class="p">(</span>
            <span class="n">function_calling_config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">FunctionCallingConfig</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;ANY&#39;</span><span class="p">)</span>
        <span class="p">),</span>
    <span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="json-response-schema">
<h2>JSON Response Schema<a class="headerlink" href="#json-response-schema" title="Link to this heading">¶</a></h2>
<section id="pydantic-model-schema-support">
<h3>Pydantic Model Schema support<a class="headerlink" href="#pydantic-model-schema-support" title="Link to this heading">¶</a></h3>
<p>Schemas can be provided as Pydantic Models.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>


<span class="k">class</span><span class="w"> </span><span class="nc">CountryInfo</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">population</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">capital</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">continent</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">gdp</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">official_language</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">total_area_sq_mi</span><span class="p">:</span> <span class="nb">int</span>


<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">,</span>
    <span class="n">contents</span><span class="o">=</span><span class="s1">&#39;Give me information for the United States.&#39;</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">GenerateContentConfig</span><span class="p">(</span>
        <span class="n">response_mime_type</span><span class="o">=</span><span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
        <span class="n">response_schema</span><span class="o">=</span><span class="n">CountryInfo</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">,</span>
    <span class="n">contents</span><span class="o">=</span><span class="s1">&#39;Give me information for the United States.&#39;</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">GenerateContentConfig</span><span class="p">(</span>
        <span class="n">response_mime_type</span><span class="o">=</span><span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
        <span class="n">response_schema</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;required&#39;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s1">&#39;name&#39;</span><span class="p">,</span>
                <span class="s1">&#39;population&#39;</span><span class="p">,</span>
                <span class="s1">&#39;capital&#39;</span><span class="p">,</span>
                <span class="s1">&#39;continent&#39;</span><span class="p">,</span>
                <span class="s1">&#39;gdp&#39;</span><span class="p">,</span>
                <span class="s1">&#39;official_language&#39;</span><span class="p">,</span>
                <span class="s1">&#39;total_area_sq_mi&#39;</span><span class="p">,</span>
            <span class="p">],</span>
            <span class="s1">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;STRING&#39;</span><span class="p">},</span>
                <span class="s1">&#39;population&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;INTEGER&#39;</span><span class="p">},</span>
                <span class="s1">&#39;capital&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;STRING&#39;</span><span class="p">},</span>
                <span class="s1">&#39;continent&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;STRING&#39;</span><span class="p">},</span>
                <span class="s1">&#39;gdp&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;INTEGER&#39;</span><span class="p">},</span>
                <span class="s1">&#39;official_language&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;STRING&#39;</span><span class="p">},</span>
                <span class="s1">&#39;total_area_sq_mi&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;INTEGER&#39;</span><span class="p">},</span>
            <span class="p">},</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;OBJECT&#39;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">),</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="enum-response-schema">
<h2>Enum Response Schema<a class="headerlink" href="#enum-response-schema" title="Link to this heading">¶</a></h2>
<section id="text-response">
<h3>Text Response<a class="headerlink" href="#text-response" title="Link to this heading">¶</a></h3>
<p>You can set response_mime_type to ‘text/x.enum’ to return one of those enum
values as the response.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">enum</span><span class="w"> </span><span class="kn">import</span> <span class="n">Enum</span>

<span class="k">class</span><span class="w"> </span><span class="nc">InstrumentEnum</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="n">PERCUSSION</span> <span class="o">=</span> <span class="s1">&#39;Percussion&#39;</span>
    <span class="n">STRING</span> <span class="o">=</span> <span class="s1">&#39;String&#39;</span>
    <span class="n">WOODWIND</span> <span class="o">=</span> <span class="s1">&#39;Woodwind&#39;</span>
    <span class="n">BRASS</span> <span class="o">=</span> <span class="s1">&#39;Brass&#39;</span>
    <span class="n">KEYBOARD</span> <span class="o">=</span> <span class="s1">&#39;Keyboard&#39;</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">,</span>
    <span class="n">contents</span><span class="o">=</span><span class="s1">&#39;What instrument plays multiple notes at once?&#39;</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;response_mime_type&#39;</span><span class="p">:</span> <span class="s1">&#39;text/x.enum&#39;</span><span class="p">,</span>
        <span class="s1">&#39;response_schema&#39;</span><span class="p">:</span> <span class="n">InstrumentEnum</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="json-response">
<h3>JSON Response<a class="headerlink" href="#json-response" title="Link to this heading">¶</a></h3>
<p>You can also set response_mime_type to ‘application/json’, the response will be
identical but in quotes.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">InstrumentEnum</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="n">PERCUSSION</span> <span class="o">=</span> <span class="s1">&#39;Percussion&#39;</span>
    <span class="n">STRING</span> <span class="o">=</span> <span class="s1">&#39;String&#39;</span>
    <span class="n">WOODWIND</span> <span class="o">=</span> <span class="s1">&#39;Woodwind&#39;</span>
    <span class="n">BRASS</span> <span class="o">=</span> <span class="s1">&#39;Brass&#39;</span>
    <span class="n">KEYBOARD</span> <span class="o">=</span> <span class="s1">&#39;Keyboard&#39;</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">,</span>
    <span class="n">contents</span><span class="o">=</span><span class="s1">&#39;What instrument plays multiple notes at once?&#39;</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;response_mime_type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span>
        <span class="s1">&#39;response_schema&#39;</span><span class="p">:</span> <span class="n">InstrumentEnum</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="generate-content-synchronous-streaming">
<h2>Generate Content (Synchronous Streaming)<a class="headerlink" href="#generate-content-synchronous-streaming" title="Link to this heading">¶</a></h2>
<p>Generate content in a streaming format so that the model outputs streams back
to you, rather than being returned as one chunk.</p>
<section id="streaming-for-text-content">
<h3>Streaming for text content<a class="headerlink" href="#streaming-for-text-content" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content_stream</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">,</span> <span class="n">contents</span><span class="o">=</span><span class="s1">&#39;Tell me a story in 300 words.&#39;</span>
<span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">chunk</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="streaming-for-image-content">
<h3>Streaming for image content<a class="headerlink" href="#streaming-for-image-content" title="Link to this heading">¶</a></h3>
<p>If your image is stored in <a class="reference external" href="https://cloud.google.com/storage">Google Cloud Storage</a>, you can use the <cite>from_uri</cite> class method to create a <cite>Part</cite> object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content_stream</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">,</span>
    <span class="n">contents</span><span class="o">=</span><span class="p">[</span>
        <span class="s1">&#39;What is this image about?&#39;</span><span class="p">,</span>
        <span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="o">.</span><span class="n">from_uri</span><span class="p">(</span>
            <span class="n">file_uri</span><span class="o">=</span><span class="s1">&#39;gs://generativeai-downloads/images/scones.jpg&#39;</span><span class="p">,</span>
            <span class="n">mime_type</span><span class="o">=</span><span class="s1">&#39;image/jpeg&#39;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">],</span>
<span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">chunk</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If your image is stored in your local file system, you can read it in as bytes
data and use the <code class="docutils literal notranslate"><span class="pre">from_bytes</span></code> class method to create a <code class="docutils literal notranslate"><span class="pre">Part</span></code> object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="n">YOUR_IMAGE_PATH</span> <span class="o">=</span> <span class="s1">&#39;your_image_path&#39;</span>
<span class="n">YOUR_IMAGE_MIME_TYPE</span> <span class="o">=</span> <span class="s1">&#39;your_image_mime_type&#39;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">YOUR_IMAGE_PATH</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">image_bytes</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content_stream</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">,</span>
    <span class="n">contents</span><span class="o">=</span><span class="p">[</span>
        <span class="s1">&#39;What is this image about?&#39;</span><span class="p">,</span>
        <span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">image_bytes</span><span class="p">,</span> <span class="n">mime_type</span><span class="o">=</span><span class="n">YOUR_IMAGE_MIME_TYPE</span><span class="p">),</span>
    <span class="p">],</span>
<span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">chunk</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="generate-content-asynchronous-non-streaming">
<h2>Generate Content (Asynchronous Non-Streaming)<a class="headerlink" href="#generate-content-asynchronous-non-streaming" title="Link to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">client.aio</span></code> exposes all the analogous <a class="reference external" href="https://docs.python.org/3/library/asyncio.html">async methods</a> that are available on <code class="docutils literal notranslate"><span class="pre">client</span></code>.
Note that it applies to all the modules.</p>
<p>For example, <code class="docutils literal notranslate"><span class="pre">client.aio.models.generate_content</span></code> is the <code class="docutils literal notranslate"><span class="pre">async</span></code> version of <code class="docutils literal notranslate"><span class="pre">client.models.generate_content</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">aio</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">,</span> <span class="n">contents</span><span class="o">=</span><span class="s1">&#39;Tell me a story in 300 words.&#39;</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="generate-content-asynchronous-streaming">
<h2>Generate Content (Asynchronous Streaming)<a class="headerlink" href="#generate-content-asynchronous-streaming" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">aio</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content_stream</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">,</span> <span class="n">contents</span><span class="o">=</span><span class="s1">&#39;Tell me a story in 300 words.&#39;</span>
<span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">chunk</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="count-tokens-and-compute-tokens">
<h2>Count Tokens and Compute Tokens<a class="headerlink" href="#count-tokens-and-compute-tokens" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">count_tokens</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">,</span>
    <span class="n">contents</span><span class="o">=</span><span class="s1">&#39;why is the sky blue?&#39;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>
</div>
<section id="compute-tokens">
<h3>Compute Tokens<a class="headerlink" href="#compute-tokens" title="Link to this heading">¶</a></h3>
<p>Compute tokens is only supported in Vertex AI.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">compute_tokens</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">,</span>
    <span class="n">contents</span><span class="o">=</span><span class="s1">&#39;why is the sky blue?&#39;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="count-tokens-asynchronous">
<h3>Count Tokens (Asynchronous)<a class="headerlink" href="#count-tokens-asynchronous" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">aio</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">count_tokens</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">,</span>
    <span class="n">contents</span><span class="o">=</span><span class="s1">&#39;why is the sky blue?&#39;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="embed-content">
<h2>Embed Content<a class="headerlink" href="#embed-content" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">embed_content</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;text-embedding-004&#39;</span><span class="p">,</span>
    <span class="n">contents</span><span class="o">=</span><span class="s1">&#39;why is the sky blue?&#39;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="c1"># multiple contents with config</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">embed_content</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;text-embedding-004&#39;</span><span class="p">,</span>
    <span class="n">contents</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;why is the sky blue?&#39;</span><span class="p">,</span> <span class="s1">&#39;What is your age?&#39;</span><span class="p">],</span>
    <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">EmbedContentConfig</span><span class="p">(</span><span class="n">output_dimensionality</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="imagen">
<h2>Imagen<a class="headerlink" href="#imagen" title="Link to this heading">¶</a></h2>
<section id="generate-image">
<h3>Generate Image<a class="headerlink" href="#generate-image" title="Link to this heading">¶</a></h3>
<p>Support for generate image in Gemini Developer API is behind an allowlist</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="c1"># Generate Image</span>
<span class="n">response1</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_images</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;imagen-3.0-generate-002&#39;</span><span class="p">,</span>
    <span class="n">prompt</span><span class="o">=</span><span class="s1">&#39;An umbrella in the foreground, and a rainy night sky in the background&#39;</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">GenerateImagesConfig</span><span class="p">(</span>
        <span class="n">number_of_images</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">include_rai_reason</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">output_mime_type</span><span class="o">=</span><span class="s1">&#39;image/jpeg&#39;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span>
<span class="n">response1</span><span class="o">.</span><span class="n">generated_images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>Upscale image is only supported in Vertex AI.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="c1"># Upscale the generated image from above</span>
<span class="n">response2</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">upscale_image</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;imagen-3.0-generate-002&#39;</span><span class="p">,</span>
    <span class="n">image</span><span class="o">=</span><span class="n">response1</span><span class="o">.</span><span class="n">generated_images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">image</span><span class="p">,</span>
    <span class="n">upscale_factor</span><span class="o">=</span><span class="s1">&#39;x2&#39;</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">UpscaleImageConfig</span><span class="p">(</span>
        <span class="n">include_rai_reason</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">output_mime_type</span><span class="o">=</span><span class="s1">&#39;image/jpeg&#39;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span>
<span class="n">response2</span><span class="o">.</span><span class="n">generated_images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="edit-image">
<h3>Edit Image<a class="headerlink" href="#edit-image" title="Link to this heading">¶</a></h3>
<p>Edit image uses a separate model from generate and upscale.</p>
<p>Edit image is only supported in Vertex AI.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Edit the generated image from above</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">google.genai.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">RawReferenceImage</span><span class="p">,</span> <span class="n">MaskReferenceImage</span>

<span class="n">raw_ref_image</span> <span class="o">=</span> <span class="n">RawReferenceImage</span><span class="p">(</span>
    <span class="n">reference_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">reference_image</span><span class="o">=</span><span class="n">response1</span><span class="o">.</span><span class="n">generated_images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">image</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Model computes a mask of the background</span>
<span class="n">mask_ref_image</span> <span class="o">=</span> <span class="n">MaskReferenceImage</span><span class="p">(</span>
    <span class="n">reference_id</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">MaskReferenceConfig</span><span class="p">(</span>
        <span class="n">mask_mode</span><span class="o">=</span><span class="s1">&#39;MASK_MODE_BACKGROUND&#39;</span><span class="p">,</span>
        <span class="n">mask_dilation</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span>

<span class="n">response3</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">edit_image</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;imagen-3.0-capability-001&#39;</span><span class="p">,</span>
    <span class="n">prompt</span><span class="o">=</span><span class="s1">&#39;Sunlight and clear sky&#39;</span><span class="p">,</span>
    <span class="n">reference_images</span><span class="o">=</span><span class="p">[</span><span class="n">raw_ref_image</span><span class="p">,</span> <span class="n">mask_ref_image</span><span class="p">],</span>
    <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">EditImageConfig</span><span class="p">(</span>
        <span class="n">edit_mode</span><span class="o">=</span><span class="s1">&#39;EDIT_MODE_INPAINT_INSERTION&#39;</span><span class="p">,</span>
        <span class="n">number_of_images</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">include_rai_reason</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">output_mime_type</span><span class="o">=</span><span class="s1">&#39;image/jpeg&#39;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span>
<span class="n">response3</span><span class="o">.</span><span class="n">generated_images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="veo">
<h2>Veo<a class="headerlink" href="#veo" title="Link to this heading">¶</a></h2>
<section id="generate-videos">
<h3>Generate Videos<a class="headerlink" href="#generate-videos" title="Link to this heading">¶</a></h3>
<p>Support for generate videos in Vertex and Gemini Developer API is behind an allowlist</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="c1"># Create operation</span>
<span class="n">operation</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_videos</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;veo-2.0-generate-001&#39;</span><span class="p">,</span>
    <span class="n">prompt</span><span class="o">=</span><span class="s1">&#39;A neon hologram of a cat driving at top speed&#39;</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">GenerateVideosConfig</span><span class="p">(</span>
        <span class="n">number_of_videos</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">fps</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span>
        <span class="n">duration_seconds</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">enhance_prompt</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span>

<span class="c1"># Poll operation</span>
<span class="k">while</span> <span class="ow">not</span> <span class="n">operation</span><span class="o">.</span><span class="n">done</span><span class="p">:</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">operation</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">operations</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">operation</span><span class="p">)</span>

<span class="n">video</span> <span class="o">=</span> <span class="n">operation</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">generated_videos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">video</span>
<span class="n">video</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="chats">
<h1>Chats<a class="headerlink" href="#chats" title="Link to this heading">¶</a></h1>
<p>Create a chat session to start a multi-turn conversations with the model. Then,
use <cite>chat.send_message</cite> function multiple times within the same chat session so
that it can reflect on its previous responses (i.e., engage in an ongoing
conversation). See the ‘Create a client’ section above to initialize a client.</p>
<section id="send-message-synchronous-non-streaming">
<h2>Send Message (Synchronous Non-Streaming)<a class="headerlink" href="#send-message-synchronous-non-streaming" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">chat</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chats</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">chat</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s1">&#39;tell me a story&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">chat</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s1">&#39;summarize the story you told me in 1 sentence&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="send-message-synchronous-streaming">
<h2>Send Message (Synchronous Streaming)<a class="headerlink" href="#send-message-synchronous-streaming" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">chat</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chats</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">chat</span><span class="o">.</span><span class="n">send_message_stream</span><span class="p">(</span><span class="s1">&#39;tell me a story&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">chunk</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>  <span class="c1"># end=&#39;&#39; is optional, for demo purposes.</span>
</pre></div>
</div>
</section>
<section id="send-message-asynchronous-non-streaming">
<h2>Send Message (Asynchronous Non-Streaming)<a class="headerlink" href="#send-message-asynchronous-non-streaming" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">chat</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">aio</span><span class="o">.</span><span class="n">chats</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">chat</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s1">&#39;tell me a story&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="send-message-asynchronous-streaming">
<h2>Send Message (Asynchronous Streaming)<a class="headerlink" href="#send-message-asynchronous-streaming" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">chat</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">aio</span><span class="o">.</span><span class="n">chats</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="k">await</span> <span class="n">chat</span><span class="o">.</span><span class="n">send_message_stream</span><span class="p">(</span><span class="s1">&#39;tell me a story&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">chunk</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="c1"># end=&#39;&#39; is optional, for demo purposes.</span>
</pre></div>
</div>
</section>
</section>
<section id="files">
<h1>Files<a class="headerlink" href="#files" title="Link to this heading">¶</a></h1>
<p>Files are only supported in Gemini Developer API.  See the ‘Create a client’
section above to initialize a client.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">gsutil cp gs://cloud-samples-data/generative-ai/pdf/2312.11805v3.pdf .</span>
<span class="go">gsutil cp gs://cloud-samples-data/generative-ai/pdf/2403.05530.pdf .</span>
</pre></div>
</div>
<section id="upload">
<h2>Upload<a class="headerlink" href="#upload" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">file1</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="s1">&#39;2312.11805v3.pdf&#39;</span><span class="p">)</span>
<span class="n">file2</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="s1">&#39;2403.05530.pdf&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">file1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">file2</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="get">
<h2>Get<a class="headerlink" href="#get" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">file1</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="s1">&#39;2312.11805v3.pdf&#39;</span><span class="p">)</span>
<span class="n">file_info</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">file1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="delete">
<h2>Delete<a class="headerlink" href="#delete" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">file3</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="s1">&#39;2312.11805v3.pdf&#39;</span><span class="p">)</span>

<span class="n">client</span><span class="o">.</span><span class="n">files</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">file3</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="caches">
<h1>Caches<a class="headerlink" href="#caches" title="Link to this heading">¶</a></h1>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">client.caches</span></code> contains the control plane APIs for cached content.</dt><dd><p>See the ‘Create a client’ section above to initialize a client.</p>
</dd>
</dl>
<section id="create">
<h2>Create<a class="headerlink" href="#create" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="k">if</span> <span class="n">client</span><span class="o">.</span><span class="n">vertexai</span><span class="p">:</span>
    <span class="n">file_uris</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;gs://cloud-samples-data/generative-ai/pdf/2312.11805v3.pdf&#39;</span><span class="p">,</span>
        <span class="s1">&#39;gs://cloud-samples-data/generative-ai/pdf/2403.05530.pdf&#39;</span><span class="p">,</span>
    <span class="p">]</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">file_uris</span> <span class="o">=</span> <span class="p">[</span><span class="n">file1</span><span class="o">.</span><span class="n">uri</span><span class="p">,</span> <span class="n">file2</span><span class="o">.</span><span class="n">uri</span><span class="p">]</span>

<span class="n">cached_content</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">caches</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">CreateCachedContentConfig</span><span class="p">(</span>
        <span class="n">contents</span><span class="o">=</span><span class="p">[</span>
            <span class="n">types</span><span class="o">.</span><span class="n">Content</span><span class="p">(</span>
                <span class="n">role</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span>
                <span class="n">parts</span><span class="o">=</span><span class="p">[</span>
                    <span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="o">.</span><span class="n">from_uri</span><span class="p">(</span>
                        <span class="n">file_uri</span><span class="o">=</span><span class="n">file_uris</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mime_type</span><span class="o">=</span><span class="s1">&#39;application/pdf&#39;</span>
                    <span class="p">),</span>
                    <span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="o">.</span><span class="n">from_uri</span><span class="p">(</span>
                        <span class="n">file_uri</span><span class="o">=</span><span class="n">file_uris</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                        <span class="n">mime_type</span><span class="o">=</span><span class="s1">&#39;application/pdf&#39;</span><span class="p">,</span>
                    <span class="p">),</span>
                <span class="p">],</span>
            <span class="p">)</span>
        <span class="p">],</span>
        <span class="n">system_instruction</span><span class="o">=</span><span class="s1">&#39;What is the sum of the two pdfs?&#39;</span><span class="p">,</span>
        <span class="n">display_name</span><span class="o">=</span><span class="s1">&#39;test cache&#39;</span><span class="p">,</span>
        <span class="n">ttl</span><span class="o">=</span><span class="s1">&#39;3600s&#39;</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id3">
<h2>Get<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cached_content</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">caches</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">cached_content</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="generate-content-with-caches">
<h2>Generate Content with Caches<a class="headerlink" href="#generate-content-with-caches" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">,</span>
    <span class="n">contents</span><span class="o">=</span><span class="s1">&#39;Summarize the pdfs&#39;</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">GenerateContentConfig</span><span class="p">(</span>
        <span class="n">cached_content</span><span class="o">=</span><span class="n">cached_content</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="tunings">
<h1>Tunings<a class="headerlink" href="#tunings" title="Link to this heading">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">client.tunings</span></code> contains tuning job APIs and supports supervised fine
tuning through <code class="docutils literal notranslate"><span class="pre">tune</span></code>. See the ‘Create a client’ section above to initialize a
client.</p>
<section id="tune">
<h2>Tune<a class="headerlink" href="#tune" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Vertex AI supports tuning from GCS source</p></li>
<li><p>Gemini Developer API supports tuning from inline examples</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="k">if</span> <span class="n">client</span><span class="o">.</span><span class="n">vertexai</span><span class="p">:</span>
    <span class="n">model</span> <span class="o">=</span> <span class="s1">&#39;gemini-2.0-flash-001&#39;</span>
    <span class="n">training_dataset</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">TuningDataset</span><span class="p">(</span>
        <span class="n">gcs_uri</span><span class="o">=</span><span class="s1">&#39;gs://cloud-samples-data/ai-platform/generative_ai/gemini-1_5/text/sft_train_data.jsonl&#39;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">model</span> <span class="o">=</span> <span class="s1">&#39;models/gemini-2.0-flash-001&#39;</span>
    <span class="n">training_dataset</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">TuningDataset</span><span class="p">(</span>
        <span class="n">examples</span><span class="o">=</span><span class="p">[</span>
            <span class="n">types</span><span class="o">.</span><span class="n">TuningExample</span><span class="p">(</span>
                <span class="n">text_input</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Input text </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
                <span class="n">output</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Output text </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="p">],</span>
    <span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="n">tuning_job</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">tunings</span><span class="o">.</span><span class="n">tune</span><span class="p">(</span>
    <span class="n">base_model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">training_dataset</span><span class="o">=</span><span class="n">training_dataset</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">CreateTuningJobConfig</span><span class="p">(</span>
        <span class="n">epoch_count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tuned_model_display_name</span><span class="o">=</span><span class="s1">&#39;test_dataset_examples model&#39;</span>
    <span class="p">),</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tuning_job</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="get-tuning-job">
<h2>Get Tuning Job<a class="headerlink" href="#get-tuning-job" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tuning_job</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">tunings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">tuning_job</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tuning_job</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

<span class="n">running_states</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="s1">&#39;JOB_STATE_PENDING&#39;</span><span class="p">,</span>
        <span class="s1">&#39;JOB_STATE_RUNNING&#39;</span><span class="p">,</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="k">while</span> <span class="n">tuning_job</span><span class="o">.</span><span class="n">state</span> <span class="ow">in</span> <span class="n">running_states</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">tuning_job</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
    <span class="n">tuning_job</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">tunings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">tuning_job</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="use-tuned-model">
<h2>Use Tuned Model<a class="headerlink" href="#use-tuned-model" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="n">tuning_job</span><span class="o">.</span><span class="n">tuned_model</span><span class="o">.</span><span class="n">endpoint</span><span class="p">,</span>
    <span class="n">contents</span><span class="o">=</span><span class="s1">&#39;why is the sky blue?&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="get-tuned-model">
<h2>Get Tuned Model<a class="headerlink" href="#get-tuned-model" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tuned_model</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">tuning_job</span><span class="o">.</span><span class="n">tuned_model</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tuned_model</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="update-tuned-model">
<h2>Update Tuned Model<a class="headerlink" href="#update-tuned-model" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="n">tuned_model</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="n">tuning_job</span><span class="o">.</span><span class="n">tuned_model</span><span class="o">.</span><span class="n">model</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">UpdateModelConfig</span><span class="p">(</span>
        <span class="n">display_name</span><span class="o">=</span><span class="s1">&#39;my tuned model&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;my tuned model description&#39;</span>
    <span class="p">),</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tuned_model</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="list-tuned-models">
<h2>List Tuned Models<a class="headerlink" href="#list-tuned-models" title="Link to this heading">¶</a></h2>
<p>To retrieve base models, see: <span class="xref std std-ref">List Base Models</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;page_size&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;query_base&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}}):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pager</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;page_size&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;query_base&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pager</span><span class="o">.</span><span class="n">page_size</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pager</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">pager</span><span class="o">.</span><span class="n">next_page</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pager</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
<section id="list-tuned-models-asynchronous">
<h3>List Tuned Models (Asynchronous)<a class="headerlink" href="#list-tuned-models-asynchronous" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">for</span> <span class="n">job</span> <span class="ow">in</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">aio</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;page_size&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;query_base&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}}):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">job</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">async_pager</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">aio</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;page_size&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;query_base&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">async_pager</span><span class="o">.</span><span class="n">page_size</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">async_pager</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="k">await</span> <span class="n">async_pager</span><span class="o">.</span><span class="n">next_page</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">async_pager</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</section>
</section>
<section id="id4">
<h2>Update Tuned Model<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">pager</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">UpdateModelConfig</span><span class="p">(</span>
        <span class="n">display_name</span><span class="o">=</span><span class="s1">&#39;my tuned model&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;my tuned model description&#39;</span>
    <span class="p">),</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="list-tuning-jobs">
<h2>List Tuning Jobs<a class="headerlink" href="#list-tuning-jobs" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">job</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">tunings</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;page_size&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">job</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pager</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">tunings</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;page_size&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pager</span><span class="o">.</span><span class="n">page_size</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pager</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">pager</span><span class="o">.</span><span class="n">next_page</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pager</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
<p>List Tuning Jobs (Asynchronous):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">for</span> <span class="n">job</span> <span class="ow">in</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">aio</span><span class="o">.</span><span class="n">tunings</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;page_size&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">job</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">async_pager</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">aio</span><span class="o">.</span><span class="n">tunings</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;page_size&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">async_pager</span><span class="o">.</span><span class="n">page_size</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">async_pager</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="k">await</span> <span class="n">async_pager</span><span class="o">.</span><span class="n">next_page</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">async_pager</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</section>
</section>
<section id="batch-prediction">
<h1>Batch Prediction<a class="headerlink" href="#batch-prediction" title="Link to this heading">¶</a></h1>
<p>Only supported in Vertex AI. See the ‘Create a client’ section above to
initialize a client.</p>
<section id="id5">
<h2>Create<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Specify model and source file only, destination and job display name will be auto-populated</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">batches</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gemini-2.0-flash-001&#39;</span><span class="p">,</span>
    <span class="n">src</span><span class="o">=</span><span class="s1">&#39;bq://my-project.my-dataset.my-table&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">job</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get a job by name</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">batches</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">job</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="n">job</span><span class="o">.</span><span class="n">state</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">completed_states</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="s1">&#39;JOB_STATE_SUCCEEDED&#39;</span><span class="p">,</span>
        <span class="s1">&#39;JOB_STATE_FAILED&#39;</span><span class="p">,</span>
        <span class="s1">&#39;JOB_STATE_CANCELLED&#39;</span><span class="p">,</span>
        <span class="s1">&#39;JOB_STATE_PAUSED&#39;</span><span class="p">,</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="k">while</span> <span class="n">job</span><span class="o">.</span><span class="n">state</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">completed_states</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">job</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
    <span class="n">job</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">batches</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">job</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>

<span class="n">job</span>
</pre></div>
</div>
</section>
<section id="list">
<h2>List<a class="headerlink" href="#list" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="k">for</span> <span class="n">job</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">batches</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">ListBatchJobsConfig</span><span class="p">(</span><span class="n">page_size</span><span class="o">=</span><span class="mi">10</span><span class="p">)):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">job</span><span class="p">)</span>
</pre></div>
</div>
<section id="list-batch-jobs-with-pager">
<h3>List Batch Jobs with Pager<a class="headerlink" href="#list-batch-jobs-with-pager" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="n">pager</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">batches</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">ListBatchJobsConfig</span><span class="p">(</span><span class="n">page_size</span><span class="o">=</span><span class="mi">10</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pager</span><span class="o">.</span><span class="n">page_size</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pager</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">pager</span><span class="o">.</span><span class="n">next_page</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pager</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="list-batch-jobs-asynchronous">
<h3>List Batch Jobs (Asynchronous)<a class="headerlink" href="#list-batch-jobs-asynchronous" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="k">async</span> <span class="k">for</span> <span class="n">job</span> <span class="ow">in</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">aio</span><span class="o">.</span><span class="n">batches</span><span class="o">.</span><span class="n">list</span><span class="p">(</span>
    <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">ListBatchJobsConfig</span><span class="p">(</span><span class="n">page_size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">job</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="list-batch-jobs-with-pager-asynchronous">
<h3>List Batch Jobs with Pager (Asynchronous)<a class="headerlink" href="#list-batch-jobs-with-pager-asynchronous" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="n">async_pager</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">aio</span><span class="o">.</span><span class="n">batches</span><span class="o">.</span><span class="n">list</span><span class="p">(</span>
    <span class="n">config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">ListBatchJobsConfig</span><span class="p">(</span><span class="n">page_size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">async_pager</span><span class="o">.</span><span class="n">page_size</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">async_pager</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="k">await</span> <span class="n">async_pager</span><span class="o">.</span><span class="n">next_page</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">async_pager</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</section>
</section>
<section id="id6">
<h2>Delete<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Delete the job resource</span>
<span class="n">delete_job</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">batches</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">job</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="n">delete_job</span>
</pre></div>
</div>
</section>
</section>
<section id="error-handling">
<h1>Error Handling<a class="headerlink" href="#error-handling" title="Link to this heading">¶</a></h1>
<p>To handle errors raised by the model, the SDK provides this <a class="reference external" href="https://github.com/googleapis/python-genai/blob/main/google/genai/errors.py">APIError</a> class.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">generate_content</span><span class="p">(</span>
        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;invalid-model-name&quot;</span><span class="p">,</span>
        <span class="n">contents</span><span class="o">=</span><span class="s2">&quot;What is your name?&quot;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="k">except</span> <span class="n">errors</span><span class="o">.</span><span class="n">APIError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">code</span><span class="p">)</span> <span class="c1"># 404</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="reference">
<h1>Reference<a class="headerlink" href="#reference" title="Link to this heading">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="genai.html">Submodules</a></li>
<li class="toctree-l1"><a class="reference internal" href="genai.html#genai-client-module">genai.client module</a></li>
<li class="toctree-l1"><a class="reference internal" href="genai.html#genai-batches-module">genai.batches module</a></li>
<li class="toctree-l1"><a class="reference internal" href="genai.html#genai-caches-module">genai.caches module</a></li>
<li class="toctree-l1"><a class="reference internal" href="genai.html#genai-chats-module">genai.chats module</a></li>
<li class="toctree-l1"><a class="reference internal" href="genai.html#genai-files-module">genai.files module</a></li>
<li class="toctree-l1"><a class="reference internal" href="genai.html#genai-live-module">genai.live module</a></li>
<li class="toctree-l1"><a class="reference internal" href="genai.html#genai-models-module">genai.models module</a></li>
<li class="toctree-l1"><a class="reference internal" href="genai.html#genai-tokens-module">genai.tokens module</a></li>
<li class="toctree-l1"><a class="reference internal" href="genai.html#genai-tunings-module">genai.tunings module</a></li>
<li class="toctree-l1"><a class="reference internal" href="genai.html#genai-types-module">genai.types module</a></li>
</ul>
</div>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="genai.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Submodules</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Google
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Google Gen AI SDK</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#imports">Imports</a></li>
<li><a class="reference internal" href="#create-a-client">Create a client</a><ul>
<li><a class="reference internal" href="#api-selection">API Selection</a></li>
<li><a class="reference internal" href="#faster-async-client-option-aiohttp">Faster async client option: Aiohttp</a></li>
<li><a class="reference internal" href="#proxy">Proxy</a></li>
</ul>
</li>
<li><a class="reference internal" href="#types">Types</a></li>
</ul>
</li>
<li><a class="reference internal" href="#models">Models</a><ul>
<li><a class="reference internal" href="#generate-content">Generate Content</a><ul>
<li><a class="reference internal" href="#with-text-content">with text content</a></li>
<li><a class="reference internal" href="#with-uploaded-file-gemini-developer-api-only">with uploaded file (Gemini Developer API only)</a></li>
<li><a class="reference internal" href="#how-to-structure-contents-argument-for-generate-content">How to structure <cite>contents</cite> argument for <cite>generate_content</cite></a><ul>
<li><a class="reference internal" href="#provide-a-list-types-content">Provide a <cite>list[types.Content]</cite></a></li>
<li><a class="reference internal" href="#provide-a-types-content-instance">Provide a <cite>types.Content</cite> instance</a></li>
<li><a class="reference internal" href="#provide-a-string">Provide a string</a></li>
<li><a class="reference internal" href="#provide-a-list-of-string">Provide a list of string</a></li>
<li><a class="reference internal" href="#provide-a-function-call-part">Provide a function call part</a></li>
<li><a class="reference internal" href="#provide-a-list-of-function-call-parts">Provide a list of function call parts</a></li>
<li><a class="reference internal" href="#provide-a-non-function-call-part">Provide a non function call part</a></li>
<li><a class="reference internal" href="#provide-a-list-of-non-function-call-parts">Provide a list of non function call parts</a></li>
<li><a class="reference internal" href="#mix-types-in-contents">Mix types in contents</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#system-instructions-and-other-configs">System Instructions and Other Configs</a></li>
<li><a class="reference internal" href="#typed-config">Typed Config</a></li>
<li><a class="reference internal" href="#list-base-models">List Base Models</a><ul>
<li><a class="reference internal" href="#list-base-models-asynchronous">List Base Models (Asynchronous)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#safety-settings">Safety Settings</a></li>
<li><a class="reference internal" href="#function-calling">Function Calling</a><ul>
<li><a class="reference internal" href="#disabling-automatic-function-calling">Disabling automatic function calling</a></li>
<li><a class="reference internal" href="#manually-declare-and-invoke-a-function-for-function-calling">Manually declare and invoke a function for function calling</a></li>
<li><a class="reference internal" href="#function-calling-with-any-tools-config-mode">Function calling with <code class="docutils literal notranslate"><span class="pre">ANY</span></code> tools config mode</a></li>
</ul>
</li>
<li><a class="reference internal" href="#json-response-schema">JSON Response Schema</a><ul>
<li><a class="reference internal" href="#pydantic-model-schema-support">Pydantic Model Schema support</a></li>
</ul>
</li>
<li><a class="reference internal" href="#enum-response-schema">Enum Response Schema</a><ul>
<li><a class="reference internal" href="#text-response">Text Response</a></li>
<li><a class="reference internal" href="#json-response">JSON Response</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generate-content-synchronous-streaming">Generate Content (Synchronous Streaming)</a><ul>
<li><a class="reference internal" href="#streaming-for-text-content">Streaming for text content</a></li>
<li><a class="reference internal" href="#streaming-for-image-content">Streaming for image content</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generate-content-asynchronous-non-streaming">Generate Content (Asynchronous Non-Streaming)</a></li>
<li><a class="reference internal" href="#generate-content-asynchronous-streaming">Generate Content (Asynchronous Streaming)</a></li>
<li><a class="reference internal" href="#count-tokens-and-compute-tokens">Count Tokens and Compute Tokens</a><ul>
<li><a class="reference internal" href="#compute-tokens">Compute Tokens</a></li>
<li><a class="reference internal" href="#count-tokens-asynchronous">Count Tokens (Asynchronous)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#embed-content">Embed Content</a></li>
<li><a class="reference internal" href="#imagen">Imagen</a><ul>
<li><a class="reference internal" href="#generate-image">Generate Image</a></li>
<li><a class="reference internal" href="#edit-image">Edit Image</a></li>
</ul>
</li>
<li><a class="reference internal" href="#veo">Veo</a><ul>
<li><a class="reference internal" href="#generate-videos">Generate Videos</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#chats">Chats</a><ul>
<li><a class="reference internal" href="#send-message-synchronous-non-streaming">Send Message (Synchronous Non-Streaming)</a></li>
<li><a class="reference internal" href="#send-message-synchronous-streaming">Send Message (Synchronous Streaming)</a></li>
<li><a class="reference internal" href="#send-message-asynchronous-non-streaming">Send Message (Asynchronous Non-Streaming)</a></li>
<li><a class="reference internal" href="#send-message-asynchronous-streaming">Send Message (Asynchronous Streaming)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#files">Files</a><ul>
<li><a class="reference internal" href="#upload">Upload</a></li>
<li><a class="reference internal" href="#get">Get</a></li>
<li><a class="reference internal" href="#delete">Delete</a></li>
</ul>
</li>
<li><a class="reference internal" href="#caches">Caches</a><ul>
<li><a class="reference internal" href="#create">Create</a></li>
<li><a class="reference internal" href="#id3">Get</a></li>
<li><a class="reference internal" href="#generate-content-with-caches">Generate Content with Caches</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tunings">Tunings</a><ul>
<li><a class="reference internal" href="#tune">Tune</a></li>
<li><a class="reference internal" href="#get-tuning-job">Get Tuning Job</a></li>
<li><a class="reference internal" href="#use-tuned-model">Use Tuned Model</a></li>
<li><a class="reference internal" href="#get-tuned-model">Get Tuned Model</a></li>
<li><a class="reference internal" href="#update-tuned-model">Update Tuned Model</a></li>
<li><a class="reference internal" href="#list-tuned-models">List Tuned Models</a><ul>
<li><a class="reference internal" href="#list-tuned-models-asynchronous">List Tuned Models (Asynchronous)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id4">Update Tuned Model</a></li>
<li><a class="reference internal" href="#list-tuning-jobs">List Tuning Jobs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#batch-prediction">Batch Prediction</a><ul>
<li><a class="reference internal" href="#id5">Create</a></li>
<li><a class="reference internal" href="#list">List</a><ul>
<li><a class="reference internal" href="#list-batch-jobs-with-pager">List Batch Jobs with Pager</a></li>
<li><a class="reference internal" href="#list-batch-jobs-asynchronous">List Batch Jobs (Asynchronous)</a></li>
<li><a class="reference internal" href="#list-batch-jobs-with-pager-asynchronous">List Batch Jobs with Pager (Asynchronous)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id6">Delete</a></li>
</ul>
</li>
<li><a class="reference internal" href="#error-handling">Error Handling</a></li>
<li><a class="reference internal" href="#reference">Reference</a></li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=5fa4622c"></script>
    </body>
</html>